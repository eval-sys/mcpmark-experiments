{
  "task_id": "english_talent",
  "task_name": "English Talent",
  "category_id": "student_database",
  "category_name": "Student Database",
  "description": "Select qualified students with S/A recommendation grades and TOEFL scores ≥100 for English media operations recruitment opportunities.",
  "author": "Lingjun Chen",
  "created_at": "2025-08-10",
  "difficulty": "L3",
  "tags": [
    "data extraction",
    "cross-referencing",
    "pattern analysis"
  ],
  "mcp": [
    "filesystem"
  ],
  "metadata": {},
  "instruction": "We are now recruiting students proficient in English to be responsible for the school’s English media operations. To contact with students, from the total of 150 students, select those who **meet both of the following criteria** :\n\n1. Rated ****S** or** ****A** grade level in** `recommendation_letter.txt` by their teachers.\n2. TOEFL score in the basic info is **higher than or equal to 100** .\n\n Please compile all their names, ids and emails into a  `qualified_students.txt` file, with the format:\n\n    name: xxx\n\tid: xxx\n\temail: xxx\n\nEach person’s information should occupy three lines, with one blank line between each block.\n",
  "verify": "#!/usr/bin/env python3\n\"\"\"\nVerification script for Student Database Task: English Talent Recruitment\n\"\"\"\n\nimport sys\nfrom pathlib import Path\nimport re\nimport os\n\ndef get_test_directory() -> Path:\n    \"\"\"Get the test directory from FILESYSTEM_TEST_DIR env var.\"\"\"\n    test_root = os.environ.get(\"FILESYSTEM_TEST_DIR\")\n    if not test_root:\n        raise ValueError(\"FILESYSTEM_TEST_DIR environment variable is required\")\n    return Path(test_root)\n\ndef verify_qualified_students_file_exists(test_dir: Path) -> bool:\n    \"\"\"Verify that the qualified_students.txt file exists.\"\"\"\n    answer_file = test_dir / \"qualified_students.txt\"\n    \n    if not answer_file.exists():\n        print(\"❌ File 'qualified_students.txt' not found\")\n        return False\n    \n    print(\"✅ Qualified students file found\")\n    return True\n\ndef verify_file_format(test_dir: Path) -> bool:\n    \"\"\"Verify that the qualified_students.txt file has the correct format.\"\"\"\n    answer_file = test_dir / \"qualified_students.txt\"\n    \n    try:\n        content = answer_file.read_text()\n        lines = content.strip().split('\\n')\n        \n        if not lines:\n            print(\"❌ File is empty\")\n            return False\n        \n        # Check if content follows the expected pattern\n        # Each student should have 3 lines: name, id, email\n        # Students should be separated by blank lines\n        current_line = 0\n        student_count = 0\n        \n        while current_line < len(lines):\n            # Skip blank lines\n            if not lines[current_line].strip():\n                current_line += 1\n                continue\n            \n            # Check if we have enough lines for a complete student\n            if current_line + 2 >= len(lines):\n                print(f\"❌ Incomplete student entry at line {current_line + 1}\")\n                return False\n            \n            # Verify name line format\n            if not lines[current_line].strip().startswith(\"name: \"):\n                print(f\"❌ Invalid name line format at line {current_line + 1}: {lines[current_line]}\")\n                return False\n            \n            # Verify id line format\n            if not lines[current_line + 1].strip().startswith(\"id: \"):\n                print(f\"❌ Invalid id line format at line {current_line + 2}: {lines[current_line + 1]}\")\n                return False\n            \n            # Verify email line format\n            if not lines[current_line + 2].strip().startswith(\"email: \"):\n                print(f\"❌ Invalid email line format at line {current_line + 3}: {lines[current_line + 2]}\")\n                return False\n            \n            student_count += 1\n            current_line += 3\n            \n            # Check for blank line separator (except for the last student)\n            if current_line < len(lines) and lines[current_line].strip():\n                print(f\"❌ Missing blank line separator after student {student_count}\")\n                return False\n            \n            current_line += 1\n        \n        if student_count == 0:\n            print(\"❌ No valid student entries found\")\n            return False\n        \n        print(f\"✅ File format is correct with {student_count} students\")\n        return True\n        \n    except Exception as e:\n        print(f\"❌ Error reading qualified students file: {e}\")\n        return False\n\ndef parse_qualified_students_file(test_dir: Path) -> list:\n    \"\"\"Parse the qualified_students.txt file and return structured data.\"\"\"\n    answer_file = test_dir / \"qualified_students.txt\"\n    \n    try:\n        content = answer_file.read_text()\n        lines = content.strip().split('\\n')\n        \n        students = []\n        current_line = 0\n        \n        while current_line < len(lines):\n            # Skip blank lines\n            if not lines[current_line].strip():\n                current_line += 1\n                continue\n            \n            # Parse student entry\n            name_line = lines[current_line].strip()\n            id_line = lines[current_line + 1].strip()\n            email_line = lines[current_line + 2].strip()\n            \n            # Extract name\n            name = name_line.replace(\"name: \", \"\").strip()\n            \n            # Extract id\n            student_id = id_line.replace(\"id: \", \"\").strip()\n            \n            # Extract email\n            email = email_line.replace(\"email: \", \"\").strip()\n            \n            students.append({\n                'name': name,\n                'id': student_id,\n                'email': email\n            })\n            \n            current_line += 4  # Skip to next student (after blank line)\n        \n        return students\n        \n    except Exception as e:\n        print(f\"❌ Error parsing qualified students file: {e}\")\n        return []\n\ndef verify_student_count(students: list) -> bool:\n    \"\"\"Verify that exactly 19 students are found.\"\"\"\n    expected_count = 19\n    actual_count = len(students)\n    \n    if actual_count != expected_count:\n        print(f\"❌ Expected {expected_count} students, but found {actual_count}\")\n        return False\n    \n    print(f\"✅ Found exactly {expected_count} students\")\n    return True\n\ndef verify_expected_students(students: list) -> bool:\n    \"\"\"Verify that all expected students are present with correct details.\"\"\"\n    # Expected students from answer.md\n    expected_students = {\n        'James Smith': {'id': '20177389', 'email': 'james.smith30@outlook.com'},\n        'Ava Lopez': {'id': '20166998', 'email': 'ava.lopez67@outlook.com'},\n        'James Anderson': {'id': '20153606', 'email': 'james.anderson71@yahoo.com'},\n        'Benjamin Anderson': {'id': '20136681', 'email': 'benjamin.anderson37@qq.com'},\n        'Sarah Wilson': {'id': '20158819', 'email': 'sarah.wilson96@outlook.com'},\n        'Isabella Davis': {'id': '20101701', 'email': 'isabella.davis89@gmail.com'},\n        'James Moore': {'id': '20188937', 'email': 'james.moore62@gmail.com'},\n        'Harper Williams': {'id': '20157943', 'email': 'harper.williams38@163.com'},\n        'Noah Smith': {'id': '20132669', 'email': 'noah.smith45@163.com'},\n        'Emma Thomas': {'id': '20109144', 'email': 'emma.thomas68@163.com'},\n        'Mary Brown': {'id': '20199583', 'email': 'mary.brown27@yahoo.com'},\n        'John Jones': {'id': '20201800', 'email': 'john.jones46@gmail.com'},\n        'Mia Anderson': {'id': '20162542', 'email': 'mia.anderson3@outlook.com'},\n        'Barbara Davis': {'id': '20126203', 'email': 'barbara.davis67@163.com'},\n        'Thomas Brown': {'id': '20119528', 'email': 'thomas.brown43@163.com'},\n        'Susan Anderson': {'id': '20148778', 'email': 'susan.anderson16@163.com'},\n        'Mary Garcia': {'id': '20174369', 'email': 'mary.garcia58@gmail.com'},\n        'Richard Wilson': {'id': '20174207', 'email': 'richard.wilson39@outlook.com'},\n        'Joseph Lopez': {'id': '20191265', 'email': 'joseph.lopez93@yahoo.com'}\n    }\n    \n    # Check if all expected students are present\n    found_students = set()\n    for student in students:\n        found_students.add(student['name'])\n    \n    missing_students = set(expected_students.keys()) - found_students\n    if missing_students:\n        print(f\"❌ Missing expected students: {missing_students}\")\n        return False\n    \n    # Check if all found students are expected\n    unexpected_students = found_students - set(expected_students.keys())\n    if unexpected_students:\n        print(f\"❌ Unexpected students found: {unexpected_students}\")\n        return False\n    \n    # Check if student details match exactly\n    for student in students:\n        expected = expected_students[student['name']]\n        if student['id'] != expected['id']:\n            print(f\"❌ ID mismatch for {student['name']}: expected {expected['id']}, got {student['id']}\")\n            return False\n        if student['email'] != expected['email']:\n            print(f\"❌ Email mismatch for {student['name']}: expected {expected['email']}, got {student['email']}\")\n            return False\n    \n    print(\"✅ All expected students are present with correct details\")\n    return True\n\ndef main():\n    \"\"\"Main verification function.\"\"\"\n    test_dir = get_test_directory()\n    print(\"🔍 Verifying Student Database Task: English Talent Recruitment...\")\n    \n    # Define verification steps\n    verification_steps = [\n        (\"Qualified Students File Exists\", verify_qualified_students_file_exists),\n        (\"File Format\", verify_file_format),\n    ]\n    \n    # Run basic verification steps first\n    all_passed = True\n    for step_name, verify_func in verification_steps:\n        print(f\"\\n--- {step_name} ---\")\n        if not verify_func(test_dir):\n            all_passed = False\n            break\n    \n    if not all_passed:\n        print(\"\\n❌ Basic verification failed, cannot proceed with content verification\")\n        sys.exit(1)\n    \n    # Parse the file and run content verification\n    print(\"\\n--- Content Verification ---\")\n    students = parse_qualified_students_file(test_dir)\n    \n    if not students:\n        print(\"❌ Failed to parse qualified students file\")\n        sys.exit(1)\n    \n    content_verification_steps = [\n        (\"Student Count\", lambda: verify_student_count(students)),\n        (\"Expected Students\", lambda: verify_expected_students(students)),\n    ]\n    \n    for step_name, verify_func in content_verification_steps:\n        print(f\"\\n--- {step_name} ---\")\n        if not verify_func():\n            all_passed = False\n    \n    # Final result\n    print(\"\\n\" + \"=\"*50)\n    if all_passed:\n        print(\"✅ English talent recruitment completed correctly!\")\n        print(f\"🎉 Found exactly {len(students)} qualified students\")\n        print(\"🎉 Task verification: PASS\")\n        sys.exit(0)\n    else:\n        print(\"❌ Task verification: FAIL\")\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    main()",
  "model_results": {
    "gemini-2-5-pro": 1,
    "deepseek-chat": 0,
    "qwen-3-coder": 0,
    "o3": 0,
    "gpt-5": 1,
    "k2": 0,
    "claude-4-sonnet": 0
  }
}